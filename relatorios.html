<!-- templates/relatorios.html (plural) -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Relat칩rio por Per칤odo</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 30px; background: #f4f4f4; }
        h2 { margin-top: 30px; border-bottom: 2px solid #ccc; }
        .filtro { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        label { font-weight: bold; }
        input[type="date"] { margin-right: 10px; padding: 5px; }
        button { padding: 7px 15px; background-color: #2b7a78; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        button:hover { background-color: #205e5b; }
        table { width: 100%; background: white; border-collapse: collapse; margin-bottom: 30px; }
        th, td { padding: 10px; border: 1px solid #ccc; text-align: left; }
        .exportar { float: right; margin-top: -40px; }
        .empty { color: #444; background: #fff; padding: 12px 16px; border-radius: 8px; display: inline-block; }
    </style>
</head>
<body>
    <h1>Relat칩rio GR10 A07 por Per칤odo</h1>

    <div class="filtro">
        <form method="GET" action="/relatorios">
            <label>Per칤odo Inicial:</label>
            <input type="date" name="data_inicio" required value="{{ data_inicio or '' }}">
            <label>Per칤odo Final:</label>
            <input type="date" name="data_fim" required value="{{ data_fim or '' }}">
            <button type="submit">Buscar</button>
        </form>
    </div>

    {% if dados and dados|length > 0 %}
        <form method="POST" action="/relatorios/pdf">
            <input type="hidden" name="data_inicio" value="{{ data_inicio }}">
            <input type="hidden" name="data_fim" value="{{ data_fim }}">
            <button class="exportar" type="submit">游늯 Exportar PDF</button>
        </form>

        {% for item in dados %}
        <h2>Contrato: {{ item.contrato }}</h2>
        <table>
            <tr><th>Nome do Gestor</th><td>{{ item.nome_gestor_relacionamento }}</td></tr>
            <tr><th>Respons치vel pelo Apontamento</th><td>{{ item.responsavel_apontamento }}</td></tr>
            <tr><th>Data do Apontamento</th><td>{{ item.data_apontamento }}</td></tr>
            <tr><th>Respons치vel pelo Preenchimento</th><td>{{ item.responsavel_preenchimento }}</td></tr>
            <tr><th>Data do Preenchimento</th><td>{{ item.data_preenchimento }}</td></tr>
            <tr><th>Pareceres Adicionais - Resposta</th><td>{{ item.pareceres_adicionais_resposta }}</td></tr>
        </table>
        {% endfor %}
    {% elif data_inicio and data_fim %}
        <p class="empty"><strong>丘멆잺 Nenhum dado encontrado para o per칤odo informado.</strong></p>
    {% endif %}
</body>
</html>
